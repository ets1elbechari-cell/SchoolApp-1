{% load static %}
<!-- templates/includes/navbar.html -->
<nav id="site-navbar" class="site-navbar" role="navigation" aria-label="Main navigation">
  <div class="nav-inner">
    <a class="brand" href="{% url 'home' %}">
      <!-- Replace with your logo file -->
{% load static %}
<img src="{% static 'schoollogo.png' %}" alt="Site logo" class="brand-img">
      <span class="brand-text">MyQuiz</span>
    </a>

    <button id="nav-toggle" class="nav-toggle" aria-expanded="false" aria-label="Toggle navigation">
      <svg width="24" height="24" viewBox="0 0 24 24" aria-hidden="true">
        <rect y="5" width="24" height="2" rx="1"></rect>
        <rect y="11" width="24" height="2" rx="1"></rect>
        <rect y="17" width="24" height="2" rx="1"></rect>
      </svg>
    </button>

    <ul class="nav-links" id="nav-links">
      <li><a data-test="home-nav" href="" class="nav-link"><span class="icon" aria-hidden="true">üìö</span><span class="label">Learn</span></a></li>
      <li><a data-test="practice-nav" href="" class="nav-link"><span class="icon" aria-hidden="true">üß†</span><span class="label">Practice</span></a></li>
      <li><a data-test="leaderboard-nav" href="" class="nav-link"><span class="icon" aria-hidden="true">üèÜ</span><span class="label">Leaderboards</span></a></li>
      <li><a data-test="quests-nav" href="" class="nav-link"><span class="icon" aria-hidden="true">üó∫Ô∏è</span><span class="label">Quests</span></a></li>
      <li><a data-test="shop-nav" href="" class="nav-link"><span class="icon" aria-hidden="true">üõçÔ∏è</span><span class="label">Shop</span></a></li>
      <li><a data-test="profile-tab" href="" class="nav-link profile-link">
        <span class="avatar" aria-hidden="true">{{ request.user.username|slice:":1"|upper }}</span>
        <span class="label">Profile</span>
      </a></li>
      <li class="nav-more">
        <button id="more-btn" class="more-btn" aria-haspopup="true" aria-expanded="false">More ‚ñæ</button>
        <div id="more-menu" class="more-menu" role="menu" aria-hidden="true">
          <a role="menuitem" href="">Settings</a>
          <a role="menuitem" href="">Help</a>
          <a role="menuitem" href="">Log out</a>
        </div>
      </li>
    </ul>
  </div>

  <!-- Inline styles so this include is plug-and-play. Move to CSS file if you prefer. -->
  <style>
    :root{
      --green-white: #edf2e9;
      --jambalaya: #613c18;
      --mantis: #6fbe5e;
      --thatch: #b49c8c;
      --nav-height: 64px;
      --container-max: 1100px;
      --radius: 10px;
    }

    /* Reset-ish for navbar area */
    .site-navbar{
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      height: var(--nav-height);
      background: linear-gradient(180deg, #ffffff 0%, var(--green-white) 100%);
      border-bottom: 1px solid rgba(97,60,24,0.06);
      box-shadow: 0 6px 16px rgba(16,16,16,0.06);
      z-index: 9999;
      display: flex;
      align-items: center;
      font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, Arial;
    }

    .nav-inner{
      width: 100%;
      max-width: var(--container-max);
      margin: 0 auto;
      padding: 8px 16px;
      display: flex;
      align-items: center;
      gap: 12px;
      justify-content: space-between;
    }

    /* Brand */
    .brand{
      display:flex;
      align-items:center;
      gap:10px;
      text-decoration:none;
      color:var(--jambalaya);
      font-weight:700;
    }
    .brand-img{
      height:44px;
      width:44px;
      object-fit:cover;
      border-radius:8px;
      box-shadow:0 6px 12px rgba(97,60,24,0.06);
      background: linear-gradient(180deg,var(--mantis), var(--jambalaya));
    }
    .brand-text{ font-size:1.05rem; color:var(--jambalaya) }

    /* Toggle (mobile) */
    .nav-toggle{
      display:none;
      background:transparent;
      border:0;
      padding:6px;
      cursor:pointer;
      color:var(--jambalaya);
    }

    /* Links */
    .nav-links{
      list-style:none;
      margin:0;
      padding:0;
      display:flex;
      gap:8px;
      align-items:center;
    }

    .nav-link{
      display:inline-flex;
      gap:8px;
      align-items:center;
      padding:8px 12px;
      border-radius:8px;
      text-decoration:none;
      color:var(--jambalaya);
      font-weight:600;
      transition:background .12s, transform .08s;
      border:1px solid transparent;
    }
    .nav-link:hover{ background: rgba(111,190,94,0.06); transform: translateY(-2px); }
    .nav-link[aria-current="page"], .nav-link.active{
      background: linear-gradient(180deg,var(--mantis), #57a84a);
      color: white;
      box-shadow: 0 8px 18px rgba(111,190,94,0.14);
    }

    .icon{ font-size:16px; display:inline-block; width:20px; text-align:center; }
    .label{ display:inline-block; min-width:48px; }

    /* avatar */
    .avatar{
      display:inline-flex;
      align-items:center;
      justify-content:center;
      width:32px;
      height:32px;
      border-radius:6px;
      background: linear-gradient(180deg,var(--thatch), rgba(0,0,0,0.03));
      color:var(--jambalaya);
      font-weight:700;
      font-size:0.95rem;
    }

    /* More dropdown */
    .nav-more{ position:relative; }
    .more-btn{
      background:transparent;
      border:0;
      padding:8px 10px;
      cursor:pointer;
      font-weight:600;
      color:var(--jambalaya);
      border-radius:8px;
    }
    .more-menu{
      position:absolute;
      right:0;
      top:calc(var(--nav-height) + 6px);
      min-width:160px;
      background:white;
      border-radius:10px;
      box-shadow:0 10px 30px rgba(16,16,16,0.12);
      border:1px solid rgba(16,16,16,0.04);
      padding:8px;
      display:none;
      z-index:10000;
    }
    .more-menu a{
      display:block;
      padding:8px 10px;
      text-decoration:none;
      color:var(--jambalaya);
      border-radius:6px;
      font-weight:600;
    }
    .more-menu a:hover{ background: rgba(97,60,24,0.04); }

    /* Responsive */
    @media (max-width:920px){
      .label{ display:none; }               /* hide text for compactness */
      .nav-toggle{ display:inline-flex; }  /* show hamburger */
    }

    @media (max-width:720px){
      .nav-links{
        position:fixed;
        right:0;
        top:var(--nav-height);
        background: linear-gradient(180deg, #fff, var(--green-white));
        height: calc(100vh - var(--nav-height));
        width:260px;
        flex-direction:column;
        gap:0;
        padding:12px;
        transform: translateX(100%);
        transition: transform .2s ease;
        box-shadow: -6px 18px 40px rgba(16,16,16,0.12);
      }
      .nav-links.open{
        transform: translateX(0);
      }
      .nav-link{
        width:100%;
        padding:12px;
        border-radius:8px;
      }
      .brand-text{ display:none; }
    }
  </style>

  <script>
    (function(){
      const toggle = document.getElementById('nav-toggle');
      const links = document.getElementById('nav-links');
      const moreBtn = document.getElementById('more-btn');
      const moreMenu = document.getElementById('more-menu');

      if(toggle){
        toggle.addEventListener('click', () => {
          const open = links.classList.toggle('open');
          toggle.setAttribute('aria-expanded', open ? 'true' : 'false');
        });
      }

      if(moreBtn){
        moreBtn.addEventListener('click', (e) => {
          const open = moreMenu.style.display !== 'block';
          moreMenu.style.display = open ? 'block' : 'none';
          moreBtn.setAttribute('aria-expanded', open ? 'true' : 'false');
        });

        // close more menu if click outside
        document.addEventListener('click', (e) => {
          if(!moreBtn.contains(e.target) && !moreMenu.contains(e.target)){
            moreMenu.style.display = 'none';
            moreBtn.setAttribute('aria-expanded', 'false');
          }
        });
      }
    })();
  </script>
</nav>
